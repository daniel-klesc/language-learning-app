<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language Learning App - MVP</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 500px;
            width: 100%;
            padding: 30px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            color: #333;
            font-size: 24px;
            margin-bottom: 10px;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .language-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        .language-btn {
            flex: 1;
            padding: 10px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .language-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 40px 20px;
            margin-bottom: 20px;
            text-align: center;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .word {
            font-size: 32px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .romanization {
            font-size: 18px;
            color: #666;
            margin-bottom: 10px;
        }

        .category {
            display: inline-block;
            padding: 5px 15px;
            background: #e9ecef;
            border-radius: 20px;
            font-size: 12px;
            color: #666;
            margin-bottom: 10px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        input {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            border: 2px solid #ddd;
            border-radius: 10px;
            transition: border-color 0.3s;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
        }

        .buttons {
            display: flex;
            gap: 10px;
        }

        button {
            flex: 1;
            padding: 15px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .feedback {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
        }

        .hidden {
            display: none;
        }

        .start-screen {
            text-align: center;
            padding: 40px 0;
        }

        .start-screen h2 {
            margin-bottom: 20px;
            color: #333;
        }

        .no-cards {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #667eea;
            border-radius: 3px;
            transition: width 0.3s;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Language Learning</h1>
        </div>

        <div class="stats">
            <div class="stat">
                <div class="stat-value" id="streak">0</div>
                <div class="stat-label">Day Streak</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="cards-due">0</div>
                <div class="stat-label">Cards Due</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="accuracy">0%</div>
                <div class="stat-label">Accuracy</div>
            </div>
        </div>

        <div class="language-selector">
            <button class="language-btn active" data-pair="cs-vi">üá®üáø Czech ‚Üí üáªüá≥ Vietnamese</button>
            <button class="language-btn" data-pair="vi-zh">üáªüá≥ Vietnamese ‚Üí üá®üá≥ Chinese</button>
            <button class="language-btn" data-pair="vi-en">üáªüá≥ Vietnamese ‚Üí üá¨üáß English</button>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progress" style="width: 0%"></div>
        </div>

        <div id="start-screen" class="start-screen">
            <h2>Ready to learn?</h2>
            <p style="margin-bottom: 20px; color: #666;">You have <span id="due-count">0</span> cards to review today</p>
            <button class="btn-primary" onclick="startSession()">Start Learning Session</button>
        </div>

        <div id="study-screen" class="hidden">
            <div class="card">
                <div class="category" id="category"></div>
                <div class="word" id="word"></div>
                <div class="romanization" id="romanization"></div>
            </div>

            <div class="feedback hidden" id="feedback"></div>

            <div class="input-group">
                <input type="text" id="answer" placeholder="Type the translation..." autocomplete="off">
            </div>

            <div class="buttons">
                <button class="btn-primary" onclick="checkAnswer()">Check Answer</button>
                <button class="btn-secondary" onclick="skipCard()">Skip</button>
            </div>
        </div>

        <div id="complete-screen" class="hidden no-cards">
            <h2>üéâ Session Complete!</h2>
            <p style="margin: 20px 0;">Great job! You've reviewed all cards for today.</p>
            <p style="margin-bottom: 20px;">Accuracy: <span id="final-accuracy">0</span>%</p>
            <button class="btn-primary" onclick="backToStart()">Back to Home</button>
        </div>
    </div>

    <script>
        // Vocabulary Database
        const vocabulary = {
            'cs-vi': [
                // Common words - Czech to Vietnamese
                { id: 1, word: 'ahoj', translation: 'xin ch√†o', romanization: 'sin ch√†o', category: 'greetings' },
                { id: 2, word: 'dƒõkuji', translation: 'c·∫£m ∆°n', romanization: 'c·∫£m ∆°n', category: 'greetings' },
                { id: 3, word: 'ano', translation: 'v√¢ng', romanization: 'v√¢ng', category: 'basics' },
                { id: 4, word: 'ne', translation: 'kh√¥ng', romanization: 'kh√¥ng', category: 'basics' },
                { id: 5, word: 'voda', translation: 'n∆∞·ªõc', romanization: 'n∆∞·ªõc', category: 'food' },
                { id: 6, word: 'chl√©b', translation: 'b√°nh m√¨', romanization: 'b√°nh m√¨', category: 'food' },
                { id: 7, word: 'jeden', translation: 'm·ªôt', romanization: 'm·ªôt', category: 'numbers' },
                { id: 8, word: 'dva', translation: 'hai', romanization: 'hai', category: 'numbers' },
                { id: 9, word: 't≈ôi', translation: 'ba', romanization: 'ba', category: 'numbers' },
                { id: 10, word: 'ƒçty≈ôi', translation: 'b·ªën', romanization: 'b·ªën', category: 'numbers' },
                { id: 11, word: 'pƒõt', translation: 'nƒÉm', romanization: 'nƒÉm', category: 'numbers' },
                { id: 12, word: 'rodina', translation: 'gia ƒë√¨nh', romanization: 'gia ƒë√¨nh', category: 'family' },
                { id: 13, word: 'matka', translation: 'm·∫π', romanization: 'm·∫π', category: 'family' },
                { id: 14, word: 'otec', translation: 'b·ªë', romanization: 'b·ªë', category: 'family' },
                { id: 15, word: 'd≈Øm', translation: 'nh√†', romanization: 'nh√†', category: 'basics' },
                { id: 16, word: '≈°kola', translation: 'tr∆∞·ªùng h·ªçc', romanization: 'tr∆∞·ªùng h·ªçc', category: 'basics' },
                { id: 17, word: 'kniha', translation: 's√°ch', romanization: 's√°ch', category: 'basics' },
                { id: 18, word: 'p≈ô√°tel√©', translation: 'b·∫°n b√®', romanization: 'b·∫°n b√®', category: 'people' },
                { id: 19, word: 'l√°ska', translation: 't√¨nh y√™u', romanization: 't√¨nh y√™u', category: 'emotions' },
                { id: 20, word: 'pr√°ce', translation: 'c√¥ng vi·ªác', romanization: 'c√¥ng vi·ªác', category: 'basics' }
            ],
            'vi-zh': [
                // Vietnamese to Chinese
                { id: 21, word: 'xin ch√†o', translation: '‰Ω†Â•Ω', romanization: 'n«ê h«éo', category: 'greetings' },
                { id: 22, word: 'c·∫£m ∆°n', translation: 'Ë∞¢Ë∞¢', romanization: 'xi√® xie', category: 'greetings' },
                { id: 23, word: 'm·ªôt', translation: '‰∏Ä', romanization: 'yƒ´', category: 'numbers' },
                { id: 24, word: 'hai', translation: '‰∫å', romanization: '√®r', category: 'numbers' },
                { id: 25, word: 'ba', translation: '‰∏â', romanization: 'sƒÅn', category: 'numbers' },
                { id: 26, word: 'n∆∞·ªõc', translation: 'Ê∞¥', romanization: 'shu«ê', category: 'food' },
                { id: 27, word: 'c∆°m', translation: 'Á±≥È•≠', romanization: 'm«ê f√†n', category: 'food' },
                { id: 28, word: 'gia ƒë√¨nh', translation: 'ÂÆ∂Â∫≠', romanization: 'jiƒÅ t√≠ng', category: 'family' },
                { id: 29, word: 'm·∫π', translation: 'Â¶àÂ¶à', romanization: 'mƒÅ ma', category: 'family' },
                { id: 30, word: 'b·ªë', translation: 'Áà∏Áà∏', romanization: 'b√† ba', category: 'family' }
            ],
            'vi-en': [
                // Vietnamese to English
                { id: 31, word: 'xin ch√†o', translation: 'hello', romanization: '', category: 'greetings' },
                { id: 32, word: 'c·∫£m ∆°n', translation: 'thank you', romanization: '', category: 'greetings' },
                { id: 33, word: 'm·ªôt', translation: 'one', romanization: '', category: 'numbers' },
                { id: 34, word: 'hai', translation: 'two', romanization: '', category: 'numbers' },
                { id: 35, word: 'ba', translation: 'three', romanization: '', category: 'numbers' },
                { id: 36, word: 'n∆∞·ªõc', translation: 'water', romanization: '', category: 'food' },
                { id: 37, word: 'b√°nh m√¨', translation: 'bread', romanization: '', category: 'food' },
                { id: 38, word: 'gia ƒë√¨nh', translation: 'family', romanization: '', category: 'family' },
                { id: 39, word: 'nh√†', translation: 'house', romanization: '', category: 'basics' },
                { id: 40, word: 'tr∆∞·ªùng h·ªçc', translation: 'school', romanization: '', category: 'basics' }
            ]
        };

        // App State
        let currentLanguagePair = 'cs-vi';
        let currentSession = [];
        let currentCardIndex = 0;
        let sessionStats = {
            correct: 0,
            total: 0
        };
        let isAnswerShown = false;

        // Local Storage Keys
        const STORAGE_KEY = 'languageApp';

        // Initialize App
        function initApp() {
            loadProgress();
            updateStats();
            setupEventListeners();
            updateDueCards();
        }

        // Setup Event Listeners
        function setupEventListeners() {
            // Language selector buttons
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.language-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentLanguagePair = this.dataset.pair;
                    updateDueCards();
                });
            });

            // Enter key to submit answer
            document.getElementById('answer').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkAnswer();
                }
            });
        }

        // Load Progress from Local Storage
        function loadProgress() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                const data = JSON.parse(saved);
                if (data.lastStudied === new Date().toDateString()) {
                    // Already studied today
                    document.getElementById('streak').textContent = data.streak || 0;
                } else if (data.lastStudied === new Date(Date.now() - 86400000).toDateString()) {
                    // Studied yesterday - continue streak
                    data.streak = (data.streak || 0) + 1;
                    saveProgress(data);
                } else {
                    // Streak broken
                    data.streak = 0;
                    saveProgress(data);
                }
                return data;
            }
            return { 
                progress: {}, 
                streak: 0, 
                lastStudied: null,
                accuracy: { correct: 0, total: 0 }
            };
        }

        // Save Progress to Local Storage
        function saveProgress(data) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        }

        // Update Statistics Display
        function updateStats() {
            const data = loadProgress();
            document.getElementById('streak').textContent = data.streak || 0;
            
            if (data.accuracy && data.accuracy.total > 0) {
                const acc = Math.round((data.accuracy.correct / data.accuracy.total) * 100);
                document.getElementById('accuracy').textContent = acc + '%';
            }
        }

        // Calculate Due Cards
        function updateDueCards() {
            const data = loadProgress();
            const now = Date.now();
            let dueCount = 0;
            
            // Get current vocabulary set
            const vocabSet = vocabulary[currentLanguagePair] || [];
            
            vocabSet.forEach(card => {
                const cardProgress = data.progress?.[currentLanguagePair]?.[card.id];
                if (!cardProgress) {
                    // New card
                    dueCount++;
                } else {
                    // Check if due for review
                    if (cardProgress.nextReview <= now) {
                        dueCount++;
                    }
                }
            });
            
            document.getElementById('cards-due').textContent = dueCount;
            document.getElementById('due-count').textContent = dueCount;
        }

        // Start Learning Session
        function startSession() {
            const data = loadProgress();
            const now = Date.now();
            currentSession = [];
            
            // Get cards that are due
            const vocabSet = vocabulary[currentLanguagePair] || [];
            
            vocabSet.forEach(card => {
                const cardProgress = data.progress?.[currentLanguagePair]?.[card.id];
                if (!cardProgress || cardProgress.nextReview <= now) {
                    currentSession.push({...card});
                }
            });
            
            if (currentSession.length === 0) {
                // No cards due
                showCompleteScreen();
                return;
            }
            
            // Shuffle session cards
            currentSession.sort(() => Math.random() - 0.5);
            
            // Reset session stats
            sessionStats = { correct: 0, total: 0 };
            currentCardIndex = 0;
            
            // Show study screen
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('study-screen').classList.remove('hidden');
            
            showCard();
        }

        // Show Current Card
        function showCard() {
            if (currentCardIndex >= currentSession.length) {
                showCompleteScreen();
                return;
            }
            
            const card = currentSession[currentCardIndex];
            document.getElementById('word').textContent = card.word;
            document.getElementById('romanization').textContent = card.romanization || '';
            document.getElementById('category').textContent = card.category;
            document.getElementById('answer').value = '';
            document.getElementById('answer').focus();
            document.getElementById('feedback').classList.add('hidden');
            isAnswerShown = false;
            
            // Update progress bar
            const progress = (currentCardIndex / currentSession.length) * 100;
            document.getElementById('progress').style.width = progress + '%';
        }

        // Check Answer
        function checkAnswer() {
            if (isAnswerShown) {
                nextCard();
                return;
            }
            
            const userAnswer = document.getElementById('answer').value.trim().toLowerCase();
            const card = currentSession[currentCardIndex];
            const correctAnswer = card.translation.toLowerCase();
            
            const isCorrect = userAnswer === correctAnswer || 
                              userAnswer === correctAnswer.replace(/\s+/g, '');
            
            // Show feedback
            const feedback = document.getElementById('feedback');
            feedback.classList.remove('hidden');
            
            if (isCorrect) {
                feedback.className = 'feedback correct';
                feedback.textContent = '‚úì Correct!';
                sessionStats.correct++;
                updateCardProgress(card.id, true);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `‚úó Incorrect. The answer is: <strong>${card.translation}</strong>`;
                updateCardProgress(card.id, false);
            }
            
            sessionStats.total++;
            isAnswerShown = true;
            
            // Change button text
            document.querySelector('.btn-primary').textContent = 'Next Card';
        }

        // Skip Card
        function skipCard() {
            const card = currentSession[currentCardIndex];
            const feedback = document.getElementById('feedback');
            feedback.classList.remove('hidden');
            feedback.className = 'feedback incorrect';
            feedback.innerHTML = `The answer is: <strong>${card.translation}</strong>`;
            
            sessionStats.total++;
            updateCardProgress(card.id, false);
            isAnswerShown = true;
            
            document.querySelector('.btn-primary').textContent = 'Next Card';
        }

        // Next Card
        function nextCard() {
            currentCardIndex++;
            document.querySelector('.btn-primary').textContent = 'Check Answer';
            showCard();
        }

        // Update Card Progress (Simple Spaced Repetition)
        function updateCardProgress(cardId, isCorrect) {
            const data = loadProgress();
            
            if (!data.progress) data.progress = {};
            if (!data.progress[currentLanguagePair]) data.progress[currentLanguagePair] = {};
            
            const cardProgress = data.progress[currentLanguagePair][cardId] || {
                level: 0,
                lastSeen: Date.now()
            };
            
            if (isCorrect) {
                // Move to next interval
                cardProgress.level = Math.min(cardProgress.level + 1, 5);
            } else {
                // Reset to beginning
                cardProgress.level = 0;
            }
            
            // Calculate next review time
            const intervals = [1, 3, 7, 14, 30, 90]; // days
            const daysUntilNext = intervals[cardProgress.level] || 90;
            cardProgress.nextReview = Date.now() + (daysUntilNext * 86400000);
            cardProgress.lastSeen = Date.now();
            
            data.progress[currentLanguagePair][cardId] = cardProgress;
            
            // Update overall accuracy
            if (!data.accuracy) data.accuracy = { correct: 0, total: 0 };
            data.accuracy.total++;
            if (isCorrect) data.accuracy.correct++;
            
            // Update last studied date
            data.lastStudied = new Date().toDateString();
            
            saveProgress(data);
        }

        // Show Complete Screen
        function showCompleteScreen() {
            document.getElementById('study-screen').classList.add('hidden');
            document.getElementById('complete-screen').classList.remove('hidden');
            
            const accuracy = sessionStats.total > 0 
                ? Math.round((sessionStats.correct / sessionStats.total) * 100)
                : 0;
            document.getElementById('final-accuracy').textContent = accuracy;
            
            updateStats();
            updateDueCards();
        }

        // Back to Start
        function backToStart() {
            document.getElementById('complete-screen').classList.add('hidden');
            document.getElementById('start-screen').classList.remove('hidden');
            updateDueCards();
        }

        // Initialize when page loads
        window.onload = initApp;
    </script>
</body>
</html>